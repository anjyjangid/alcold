<!-- BEGIN MAIN CONTENT -->
<div class="row">
	<div class="col-md-12">		
		<div class="portlet light">
			<div class="portlet-title">
				<div class="caption">
					<i class="icon-handbag"></i>{{$state.$current.data.pageSubTitle}}
				</div>				
				<div class="actions">
					<a href="#" class="btn default yellow-stripe">
					<i class="fa fa-plus"></i>
					<span class="hidden-480">
					Add New </span>
					</a>
					
				</div>
			</div>
			<div class="portlet-body">
				<div class="table-container">					
					<table class="table table-striped table-bordered table-hover" id="packagelist">
						<thead>
							<tr role="row" class="heading">
								<th width="1%">
									<input type="checkbox" class="group-checkable">
								</th>
								<th width="10%">
									Sr.
								</th>
								<th width="15%">
									Package Name
								</th>								
								<th width="10%">
									Price
								</th>
								<th width="10%">
									Status
								</th>								
								<th width="10%">
									Action
								</th>
							</tr>							
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<!-- End: life time stats -->
	</div>
</div>
<!-- END MAIN CONTENT -->
<!-- BEGIN MAIN JS -->
<script>
	
	var scope = angular.element("#packagelist").scope();
	
	var ptype = scope.$state.$current.data.type;

	var PackageTableAjax = function () {    

		

		var handleRecords = function () {

			$('#packagelist').dataTable( {
				"bProcessing": true,
				"bServerSide": true,			
				"dom": 'ftp',
				"pageLength" : 5,
				"columns": [
					{ data: "name" },
					{ data: "quantity", sClass: "center" },				
					{
						mData: null,
						sClass: "center",
						mRender: function(data, type, full) {
							var req = (data.maxQuantity - data.quantity);
							var cls = (req > 0)?'danger':'default';
							var txt = req+' Required';
							return '<a id="'+data._id+'" href="javascript:;" class="btn btn-'+cls+' btn-xs green-stripe">'+txt+'</a>';
						},					
						orderable:false
					}				
				],	
				"ajax" : {
					"url": "../admin/package/listpackage",
					"type":"POST",
					data:{ptype:ptype},
					beforeSend:function(){
						Metronic.blockUI({
							target: $('#packagelist'),				        
							overlayColor: '#000'
						});
					},
					complete:function(){
						Metronic.unblockUI($('#packagelist'));
					}
				},
				"order": []			
			});

			
			
		}

		return {
			init: function () {       
				
				//handleRecords();
			}
		};

	}();

		
		PackageTableAjax.init();

		function reloadGrid(){
			$('#orderlist').dataTable()._fnAjaxUpdate();
		}
</script>
<!-- END MAIN JS