<!-- BEGIN MAIN CONTENT -->
<div class="row">
	<div class="col-md-12">
		<!-- <div class="note note-danger">
			<p>
				NOTE: The below datatable is not connected to a real database so the filter and sorting is just simulated for demo purposes only.
			</p>
		</div> -->
		<!-- Begin: life time stats -->
		<div class="portlet light">
			<div class="portlet-title">
				<div class="caption">
					<i class="icon-handbag"></i>{{$state.$current.data.pageSubTitle}}
				</div>				
				<div class="actions">
					<a href="#" class="btn default yellow-stripe">
					<i class="fa fa-plus"></i>
					<span class="hidden-480">
					New Customer </span>
					</a>
					
				</div>
			</div>
			<div class="portlet-body">
				<div class="table-container">
					<div class="table-actions-wrapper">
						<span>
						</span>
						<select class="table-group-action-input form-control input-inline input-small input-sm">
							<option value="">Select...</option>
							<option value="Cancel">Cancel</option>
							<option value="Cancel">Hold</option>
							<option value="Cancel">On Hold</option>
							<option value="Close">Close</option>
						</select>
						<button class="btn btn-sm yellow table-group-action-submit"><i class="fa fa-check"></i> Submit</button>
					</div>
					<table class="table table-striped table-bordered table-hover" id="packagelist">
						<thead>
							<tr role="row" class="heading">
								
							</tr>							
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<!-- End: life time stats -->
	</div>
</div>
<!-- END MAIN CONTENT -->
<!-- BEGIN MAIN JS -->
<script>
	
	var scope = angular.element("#packagelist").scope();
	
	var ptype = scope.$state.$current.data.type;

	var PackageTableAjax = function () {    

		var handleRecords = function () {

			$('#packagelist').dataTable( {
				"bProcessing": true,
				"bServerSide": true,			
				"dom": 'ftp',
				"pageLength" : 5,
				"columns": [
					{ data: "name" },
					{ data: "quantity", sClass: "center" },				
					{
						mData: null,
						sClass: "center",
						mRender: function(data, type, full) {
							var req = (data.maxQuantity - data.quantity);
							var cls = (req > 0)?'danger':'default';
							var txt = req+' Required';
							return '<a id="'+data._id+'" href="javascript:;" class="btn btn-'+cls+' btn-xs green-stripe">'+txt+'</a>';
						},					
						orderable:false
					}				
				],	
				"ajax" : {
					"url": "../admin/package/listpackage",
					"type":"POST",
					data:{ptype:ptype},
					beforeSend:function(){
						Metronic.blockUI({
							target: $('#packagelist'),				        
							overlayColor: '#000'
						});
					},
					complete:function(){
						Metronic.unblockUI($('#packagelist'));
					}
				},
				"order": []			
			});

			
			
		}

		return {
			init: function () {       
				handleRecords();
			}
		};

	}();

		PackageTableAjax.init();

		function reloadGrid(){
			$('#orderlist').dataTable()._fnAjaxUpdate();
		}
</script>
<!-- END MAIN JS