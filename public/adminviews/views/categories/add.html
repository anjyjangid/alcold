<div class="row">
	<div class="col-md-12">
		<div class="portlet light">
			<div class="portlet-title tabbable-line">
				<div class="caption caption-md">
					<i class="icon-globe theme-font hide"></i>
					<span class="caption-subject font-blue-madison bold uppercase">Add Category</span>
				</div>				
			</div>
			<div class="portlet-body">

				<form name='categoryForm' ng-submit="submitCategory()" data-ng-init="categoryFormInit()">

					<div class="form-group">
						<label class="control-label">Parent Category</label>

						<div class="margin-top-10" ng-repeat="subcategory in categories">
							<select
								name="ptitle"
								class="form-control" 
								ng-model="subcategory.selectedPtitle"
								ng-options="option.cat_title for option in subcategory.categoryList"
								ng-change="setParentSubCategory($index)">

								<option value="">---- Select Category ----</option>
							</select>
						</div>


					</div>
					<p ng-show="loading">Please Wait...</p>								

					<div class="form-group" ng-class="{'has-error':categoryForm.title.$touched && categoryForm.title.$invalid}">
						
						<label class="control-label">Title</label>
						<input type="text" name="title" placeholder="Title" class="form-control" required ng-model="category.title"/>
						<span class="help-block" ng-show="categoryForm.title.$touched && categoryForm.title.$invalid">Title is required.</span>
					</div>

					<div class="form-group">
						<slug from="category.title" to="category.slug"></slug>
						<label class="control-label">Slug</label>
						<input type="text" name="slug" placeholder="Slug" class="form-control" required ng-model="category.slug" />
						<span ng-show="categoryForm.slug.$touched && categoryForm.slug.$invalid">Slug is required.</span>						
					</div>					

					<div class="clearfix margin-top-10">
						<span class="label label-danger">NOTE!</span> <span> Attached image thumbnail is supported in Latest Firefox, Chrome, Opera, Safari and Internet Explorer 10 only </span>
					</div>
					<br>

					<div class="row">
						<div class="col-sm-6">
							<label class="control-label">Thumbnail</label>
							<div class="form-group">								
								<div class="fileinput fileinput-new" data-provides="fileinput">
									<div class="fileinput-new thumbnail" style="width: 200px; height: 150px;">
										<img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&amp;text=Thumbnail" alt=""/>
									</div>
									<div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;">
									</div>
									<div>
										<span class="btn default btn-file">
										<span class="fileinput-new">
										Select thumb </span>
										<span class="fileinput-exists">
										Change </span>
										<input type="file" name="thumb" placeholder="thumbnail" class="form-control" required file-model="category.thumb"/>
										</span>
										<a href="#" class="btn default fileinput-exists" data-dismiss="fileinput">
										Remove </a>
									</div>
								</div>
								

							</div>						
						</div>
						<div class="col-sm-6" ng-show="categories.length == 1 && !categories[0].selectedPtitle">
							<label class="control-label">listing Thumbnail</label>
							<div class="form-group">
								
								<div class="fileinput fileinput-new" data-provides="fileinput">
									<div class="fileinput-new thumbnail" style="width: 200px; height: 150px;">
										<img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&amp;text=listing+thumb" alt=""/>
									</div>
									<div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;">
									</div>
									<div>
										<span class="btn default btn-file">
										<span class="fileinput-new">Select thumb</span>
										<span class="fileinput-exists">Change</span>
										<input type="file" name="lthumb" placeholder="thumbnail" class="form-control" file-model="category.lthumb"/>
										</span>
										<a href="#" class="btn default fileinput-exists" data-dismiss="fileinput">
										Remove </a>
									</div>
								</div>
								

							</div>						
						</div>
					</div>
					
					<!-- Pricing Block -->
					<div class="form-horizontal">							
							<table class="table table-bordered">
						        <thead>						            
						            <tr role="row" class="heading">                        						                
						                <th width="14%">
						                     Name
						                </th>
						                <th width="14%">
						                     Markup Type
						                </th>                                   
						                <th width="14%">
						                     Value
						                </th>
						                <th width="14%">
						                     From Qty
						                </th>
						                <th width="14%">
						                     To Qty
						                     <br><small>Use 99999 for last range</small>
						                </th>
						                
						                <th width="14%">
						                	Action
						                </th>
						            </tr>
						        </thead>
						        <tbody>					            
						            <tr><td colspan="7"><h4>Single Purchase</h4></td></tr>
						            <tr ng-if="price.category == 'pricing'" ng-repeat="(kp, price) in pricing.settings">						                
						                <td class="control-label">						                
						                	<label class="control-label">
						                		{{price.label}}: <span class="required"> * </span>
						                	</label>
						                </td>
						                <td>						                
						                	<label ng-if="category[kp].length == 0" class="control-label">
						                		{{ price.type==0 ? 'Fix Amount':'% of Amount' }}
						                	</label>
						                	<select ng-if="category[kp].length" class="form-control" ng-model="category[kp][0].type">            
						                        <option value="0">Fix Amount</option>
						                        <option value="1">% of Amount</option>
						                    </select>
						                </td>
						                <td>
						                	<label ng-if="category[kp].length == 0" class="control-label">
						                		{{ price.value }}
						                	</label>
						                    <input ng-if="category[kp].length" type="number" step="any" class="form-control" ng-model="category[kp][0].value" placeholder="">						                    
						                </td>						                
						                <td colspan="2" align="center">
						                	<label class="control-label">N/A</label>
						                </td>
						                
						                <td> 
						                	<a class="btn btn-xs default" ng-if="category[kp].length == 0" href="javascript:void();" ng-click="edittier(kp,price,1)">Edit</a>
						                	<a class="btn btn-xs default" ng-if="category[kp].length" href="javascript:void();" ng-click="edittier(kp,price,0)">Default</a>
						                </td>
						            </tr>
						            <tr>
						            	<td colspan="7">
						            	{{category.bulkDisable}}
						            		<h4>Bulk Purchase
						            			<label class="pull-right control-label">
								            		Disable bulk : <input type="checkbox" id="bulkDisable" ng-model="category.bulkDisable">
								            	</label>
						            		</h4>
							            	
							            </td>
							        </tr>
						            <tr ng-if="price.category == 'bulk_pricing'" ng-repeat-start="(kp, price) in pricing.settings"></tr>
						            
						            <tr ng-if="category[kp].length == 0" ng-hide="category.bulkDisable" ng-repeat="(bk, slots) in price.bulk">                            
						                <td class="control-label" rowspan="{{price.bulk.length}}" ng-if="$index == 0">
						                	<label class="control-label">{{price.label}}: <span class="required"> * </span></label>
						                </td>
						                <td>
						                	<label class="control-label">
						                		{{ slots.type == 0 ? 'Fix Amount':'% of Amount' }}
						                	</label>						                	
						                </td>
						                <td>
						                    <label class="control-label">
						                		{{ slots.value }}
						                	</label>						                    
						                </td>
						                <td>
						                    <label class="control-label">
						                		{{ slots.from_qty }}
						                	</label>						                    
						                </td>
						                <td>
						                    <label class="control-label">
						                		{{ slots.to_qty }}
						                	</label>						                    
						                </td>
						               
						                <td>
						                	<a class="btn btn-xs default" ng-if="$index == 0" href="javascript:void();" ng-click="edittier(kp,price,1)">Edit</a>						                	
						                </td>
						            </tr>						            						            
						            
						            <tr ng-if="category[kp].length" ng-hide="category.bulkDisable" ng-repeat="(bk, slots) in category[kp][0].bulk">                            
						                <td class="control-label" rowspan="{{category[kp][0].bulk.length}}" ng-if="$index == 0">
						                	<label class="control-label">{{category[kp][0].label}}: <span class="required"> * </span></label>
						                </td>
						                <td>						                	
						                	<select empty="false" class="form-control" ng-model="slots.type">            
						                        <option value="0">Fix Amount</option>
						                        <option value="1">% of Amount</option>
						                    </select>
						                </td>
						                <td>						                    
						                    <input type="number" step="any" class="form-control" ng-model="slots.value" placeholder="">
						                </td>
						                <td>						                    
						                    <input type="number" class="form-control" ng-model="slots.from_qty" placeholder="From Qty">						                    
						                </td>
						                <td>						                   
						                    <input type="number" class="form-control" ng-model="slots.to_qty" placeholder="To Qty" max="99999">						                    
						                </td>
						                
						                <td>						                	
						                	<a class="btn btn-xs default" ng-if="$index == 0" href="javascript:void();" ng-click="edittier(kp,price,0)">Set Default</a>
						                	<a class="btn btn-xs default" ng-if="category[kp][0].bulk.length < 4 && $index == 0" href="javascript:void();" ng-click="category[kp][0].bulk.push({type:0,value:null,from_qty:null,to_qty:null})">+</a>
						                	<a class="btn btn-xs default" ng-if="$index > 0" href="javascript:void();" ng-click="category[kp][0].bulk.splice($index,1)">Remove</a>
						                </td>
						            </tr>

						            <tr ng-repeat-end ng-if="price.category == 'bulk_pricing'"></tr>

						            <!-- Edit mode of advance order bulk -->

						            

						            <!-- Edit mode of advance order bulk -->

						        </tbody>
						    </table>						    
						</div>
					<!-- Pricing Block -->

					<div class="margin-top-10">
						<input type="submit" name="save" value="Save" class="btn green-haze">
						
						<a href="#" class="btn default">Cancel </a>
					</div>

				</form>

			</div>
		</div>
	</div>
</div>
<pre>{{category | json}}